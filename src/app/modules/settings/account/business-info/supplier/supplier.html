<div class="w-full flex justify-start py-2">
  <div class="flex w-full justify-between items-center">
    <!-- ðŸ” Qidiruv maydoni -->
    <div class="flex">
      <p-icon-field iconPosition="right" class="pr-2">
        <p-inputicon class="pi pi-search"></p-inputicon>
        <input
          type="search"
          pInputText
          pSize="small"
          placeholder="Qidiruv"
          [(ngModel)]="searchValue"
          (input)="loadData()"
        />
      </p-icon-field>
    </div>

    <!-- âž• Yangi ta'minotchi qoâ€˜shish tugmasi -->
    @if (permissions['add_supplier']) {
      <p-button
        (click)="openDialog()"
        size="small"
        icon="pi pi-plus"
        label="Yangi taâ€™minotchi"
        styleClass="shadow shadow-blue-500/50"
        [outlined]="true"
      />
    }
  </div>
</div>

<!-- ðŸ“‹ Jadval -->
<p-table
  size="small"
  #dataTableSuppliers
  [value]="supplierModel"
  dataKey="id"
  [rowHover]="true"
  [rows]="10"
  [showCurrentPageReport]="true"
  [rowsPerPageOptions]="[10, 25, 50]"
  [paginator]="true"
  [totalRecords]="totalRecords"
  [lazy]="true"
  (onLazyLoad)="pageChange($event)"
  scrollHeight="75vh"
  [filterDelay]="0"
>
  <!-- Jadval sarlavhalari -->
  <ng-template pTemplate="header">
    <tr class="border shadow h-[60px]">
      <th pSortableColumn="name" class="text-center text-nowrap sort-header">
        Taâ€™minotchi nomi
        <p-sortIcon field="name"/>
      </th>
      <th pSortableColumn="phone" class="text-center text-nowrap sort-header">
        Telefon
        <p-sortIcon field="phone"/>
      </th>
      <th pSortableColumn="email" class="text-center text-nowrap sort-header">
        Email
        <p-sortIcon field="email"/>
      </th>
      <th pSortableColumn="contactPerson" class="text-center text-nowrap sort-header">
        Aloqa shaxsi
        <p-sortIcon field="contactPerson"/>
      </th>
      <th pSortableColumn="inn" class="text-center text-nowrap sort-header">
        INN / STIR
        <p-sortIcon field="inn"/>
      </th>
      <th class="text-center text-nowrap sort-header">
        Bank hisob raqami
      </th>
    </tr>
  </ng-template>

  <!-- Jadval satrlari -->
  <ng-template pTemplate="body" let-row>
    <tr style="height:49px">
      <td class="text-nowrap text-center font-medium">{{ row.name }}</td>
      <td class="text-nowrap text-center">{{ row.phone || '-' }}</td>
      <td class="text-nowrap text-center">{{ row.email || '-' }}</td>
      <td class="text-nowrap text-center">{{ row.contactPerson || '-' }}</td>
      <td class="text-nowrap text-center">{{ row.inn || '-' }}</td>
      <td class="text-nowrap text-center">{{ row.bankAccount || '-' }}</td>
    </tr>
  </ng-template>

  <!-- Boâ€˜sh jadval xabari -->
  <ng-template pTemplate="emptymessage">
    <tr>
      <td [attr.colspan]="6" class="mx-auto">
        <div class="flex flex-col items-center justify-center p-6 text-gray-500">
          <i class="pi pi-info-circle text-3xl mb-2"></i>
          <span>Taâ€™minotchilar topilmadi</span>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

<!-- ðŸªŸ Modal oynasi -->
<p-dialog
  [(visible)]="visibleSupplierModal"
  [modal]="true"
  [draggable]="false"
  [resizable]="true"
  [closable]="true"
  [dismissableMask]="true"
  [style]="{ width: '60vw', height: '70vh' }"
  [baseZIndex]="10000"
>
  <ng-template pTemplate="header">Yangi taâ€™minotchi</ng-template>
  <ng-template pTemplate="content">
    <!-- bu yerda supplier qoâ€˜shish yoki tahrirlash form boâ€˜ladi -->
  </ng-template>
</p-dialog>
