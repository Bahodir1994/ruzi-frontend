<div
  class="h-full shadow-md transition-all duration-300 ease-in-out bg-gray-950 text-white rounded-tr-lg"
  [ngClass]="{'w-64': visible,'w-16': !visible}"
>
  <div class="flex flex-col h-full">
    <div class="overflow-y-auto">
      <ul class="list-none p-2 m-0">
        <li>
          <ul class="list-none p-0 m-0 overflow-hidden">
            @for (menu_data of items; track $index) {
              <li>
                @if (menu_data.type === 'sub') {
                  <a
                    [ngClass]="{'active-parent-link': isActiveRoute(menu_data.route) || isParentActive(menu_data)}"
                    pRipple
                    pStyleClass="@next"
                    enterFromClass="hidden"
                    enterActiveClass="animate-slidedown"
                    leaveToClass="hidden"
                    leaveActiveClass="animate-slideup"
                    class="hover:bg-ruziblue hover:text-white flex items-center cursor-pointer p-3 mb-2 mt-1 rounded-border duration-150 transition-colors p-ripple"
                  >
                    <i class="{{menu_data.icon}} pl-1 mr-2"></i>
                    <span
                      class="font-medium transition-opacity duration-500 whitespace-nowrap inline-block"
                      [class.opacity-0]="!visible"
                      [class.opacity-100]="visible"
                    >
                    {{ menu_data.label }}
                  </span>
                    <i [hidden]="!visible"
                       class="pi pi-chevron-{{ isActiveRoute(menu_data.route) ? 'down' : 'right' }} ml-auto"></i>
                  </a>

                  <ul
                    class="list-none py-0 pr-0 m-0 hidden overflow-y-hidden transition-all duration-[400ms] ease-in-out"
                    [ngClass]="{
                    'pl-4': visible,
                    'pl-0': !visible,
                    'hidden': !isParentActive(menu_data)
                  }"
                  >
                    @for (menu_data_sub of menu_data.items; track $index; let i = $index) {
                      <li>
                        @if (menu_data_sub.type === 'sub') {
                          <a
                            pRipple
                            pStyleClass="@next"
                            enterFromClass="hidden"
                            enterActiveClass="animate-slidedown"
                            leaveToClass="hidden"
                            leaveActiveClass="animate-slideup"
                            class="hover:bg-ruziblue hover:text-white flex items-center cursor-pointer p-3 my-3 rounded-border duration-150 transition-colors p-ripple"
                          >
                            <i class="{{menu_data_sub.icon}} pl-1 mr-2"></i>
                            <span class="font-medium">{{ menu_data_sub.label }}</span>
                            <i
                              class="pi pi-chevron-{{ isActiveRoute(menu_data.route) ? 'down' : 'right' }} ml-auto"></i>
                          </a>

                          <ul
                            class="list-none py-0 pl-4 pr-0 m-0 hidden overflow-y-hidden transition-all duration-[400ms] ease-in-out">
                            @for (menu_data_sub2 of menu_data_sub.items; track $index; let i = $index) {
                              <li>
                                <a
                                  pRipple
                                  [routerLink]="menu_data.route + '/' + menu_data_sub.route + '/' + menu_data_sub2.route"
                                  routerLinkActive="active-router-link"
                                  class="hover:bg-ruziblue hover:text-white flex items-center cursor-pointer p-3 my-3 rounded-border duration-150 transition-colors p-ripple">
                                  <i class="{{menu_data_sub2.icon}} pl-1 mr-2"></i>
                                  <span class="font-medium">View</span>
                                </a>
                              </li>
                            }
                          </ul>
                        }

                        @if (menu_data_sub.type === 'link') {
                          <a
                            [routerLink]="menu_data.route + '/' + menu_data_sub.route"
                            pRipple
                            [ngClass]="{'active-router-link': isActiveRoute(menu_data_sub.route) || isParentActive(menu_data)}"
                            class="hover:bg-ruziblue hover:text-white flex items-center cursor-pointer p-3 my-2 rounded-border duration-150 transition-colors p-ripple">
                            <i
                              class="{{menu_data_sub.icon}} pl-1 mr-2
"
                              [ngClass]="visible? 'mr-2': 'mr-0'"
                            ></i>
                            <span
                              class="font-medium transition-opacity duration-500 whitespace-nowrap inline-block"
                              [class.opacity-0]="!visible"
                              [class.opacity-100]="visible"
                            >
                            {{ menu_data_sub.label }}
                          </span>
                          </a>
                        }
                      </li>
                    }
                  </ul>
                }

                @if (menu_data.type === 'link') {
                  <a
                    [routerLink]="menu_data.route"
                    pRipple
                    [ngClass]="{'active-router-link': isActiveRoute(menu_data.route) || isParentActive(menu_data)}"
                    class="hover:bg-ruziblue hover:text-white flex items-center cursor-pointer p-3 my-3 rounded-border duration-150 transition-colors p-ripple"
                  >
                    <i
                      class="{{menu_data.icon}} pl-1 mr-2"
                      [ngClass]="visible? 'mr-2': 'ml-0'"
                    ></i>
                    <span
                      class="font-medium transition-opacity duration-500 whitespace-nowrap inline-block"
                      [class.opacity-0]="!visible"
                      [class.opacity-100]="visible"
                    >
                            {{ menu_data.label }}
                    </span>
                  </a>
                }
              </li>
            }
          </ul>
        </li>
      </ul>
    </div>
  </div>
</div>
